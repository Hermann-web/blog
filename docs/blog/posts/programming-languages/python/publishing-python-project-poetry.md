---
date: 2024-03-16
authors: [hermann-web]
comments: true
description: |
  Learn how to publish your Python project using Poetry, a simple yet powerful dependency management and packaging tool.
categories:
  - python
  - packaging
title: Publishing Your Python Project with Poetry
links:
  - https://test.pypi.org/
  - https://python-poetry.org/
---

# Publishing Your Python Project with Poetry

__Are you ready to share your Python project with the world and make it accessible to users and developers alike?__

<div class="float-img-container float-img-left">
  <a title="py-packages" href="https://py-pkgs.org/04-package-structure.html">
    <img alt="py-packages-logo" src="https://py-pkgs.org/_images/04-pkg-cycle.png">
  </a>
</div>

Publishing your work not only showcases your creation but also enables others to benefit from and contribute to your project. Discover the simplest way to publish Python projects using Poetry, a powerful dependency management and packaging tool.

In this guide, we'll walk you through setting up your project with [Poetry](https://python-poetry.org/docs/) and publishing it on both test.pypi and production PyPI.

Get ready to make your project accessible for testing and distribution. Let's get started!

<!-- more -->

## Getting Started with Poetry

Poetry is one of the simplest and most powerful tools for managing Python dependencies and packaging your projects. If you're new to Poetry, don't worry! We'll guide you through the process step by step.

First, ensure you have Poetry installed on your system:

```bash
pip install poetry
```

Next, create your project using Poetry:

```bash
poetry new project-folder-name
```

Certainly! Here's the modified section with a visual representation of the folder structure:

```markdown
Next, create your project using Poetry:

```bash
poetry new project-folder-name
```

When you run this command, Poetry will generate a project structure with the following folders and files:

```plaintext
project-folder-name/
├── pyproject.toml
├── README.md
├── src/
│   └── your_main_python_file.py
├── tests/
│   └── test_your_main_python_file.py
├── poetry.lock
└── .gitignore
```

??? info "python project file architecture for packaging"
    - __project-folder-name/__: This is the root directory of your project. It contains all the files and folders related to your project.
    - __pyproject.toml__: This file is the Poetry configuration file where you define your project's dependencies, Python version, and other settings.
    - __README.rst__: This file contains the documentation for your project. You can use reStructuredText format for writing documentation.
    - __src/__: This folder is where your Python source code files reside. Placing your source files in a subfolder like this is important for proper project management. It helps keep your project organized and separate from other files, such as tests or configuration files.
    - __tests/__: This folder is where you write tests for your project. Writing tests is crucial for ensuring your code works as expected and for maintaining code quality.
    - __poetry.lock__: This file is automatically generated by Poetry and contains information about the exact versions of your project's dependencies.
    - __.gitignore__: This file specifies which files and directories should be ignored by version control systems like Git. It helps keep irrelevant files out of your repository.

    Organizing your project files in this way helps maintain a clean and structured project layout, making it easier to manage, collaborate on, and maintain your codebase.

For Python project management with Poetry, refer to [this documentation](https://python-poetry.org/docs/). If you're not familiar with Poetry, you can check out [this beginner's guide](./poetry-in-practise.md) to get started or this [this python dependency management cheat](./package-managers-in-python.md) for usual commands.

## Publishing Your Project on Test PyPI

### Account Setup (One-Time Process)

Before publishing your project on test.pypi, ensure your account setup is complete:

1. __Create an account__: Visit [test.pypi.org](https://test.pypi.org/account/register/) and create an account using your email address.

2. __Verify your email__: Check your inbox for a verification email from test.pypi.org and follow the instructions to verify your email address.

3. __Set up Two-Factor Authentication (2FA)__: Navigate to your account settings on test.pypi.org and enable 2FA for added security. Follow the instructions to set up 2FA using an authenticator app or SMS.

Once your account setup is complete, proceed with configuring Poetry for publishing your project.

### Configuring Poetry for Test PyPI (One-Time Setup)

Follow these steps to configure Poetry for publishing on test.pypi:

1. Add the test.pypi repository to your Poetry config:

    ```bash
    poetry config repositories.test-pypi https://test.pypi.org/legacy/
    ```

2. Obtain a token from [test.pypi.org](https://test.pypi.org/manage/account/token/) and store it:

    ```bash
    poetry config pypi-token.test-pypi pypi-YYYYYYYY
    ```

### Publishing to Test PyPI

When you're ready to publish your project for testing:

1. Bump the version using Poetry:

    ```bash
    poetry version prerelease
    # or
    poetry version patch
    ```

2. Publish your project to test.pypi:

    ```bash
    poetry publish -r test-pypi
    ```

## Publishing Your Project on PyPI

Once you've tested your project on test.pypi and are ready to release it to the public, follow these steps:

1. Obtain a token from [pypi.org](https://pypi.org/manage/account/token/) and store it:

    ```bash
    poetry config pypi-token.pypi pypi-XXXXXXXX
    ```

2. Bump the version using Poetry:

    ```bash
    poetry version patch
    ```

3. Publish your project to PyPI:

    ```bash
    poetry publish
    ```

## Using the Package from PyPI or TestPyPI

Once your Python project is packaged and published on PyPI or TestPyPI, other developers can easily use it in their projects. Here's how they can add your package as a dependency using both pip and Poetry:

### Using pip

To use your package from PyPI, other developers can simply add it to their project's dependencies using pip. They can do this by running the following command:

```bash
# for pypi
pip install your-package-name
```

Replace `your-package-name` with the name of your package as published on PyPI.

### Using Poetry

For developers using Poetry, they can add your package to their project by specifying it in their `pyproject.toml` file. They can do this by running:

```bash
poetry add your-package-name
```

Again, replace `your-package-name` with the name of your package as published on PyPI.

### Using TestPyPI

If your package is published on TestPyPI for testing purposes, developers can also add it to their projects similarly using pip and Poetry, but they need to specify the TestPyPI repository URL. Here's how they can do it:

#### Using pip with TestPyPI

```bash
pip install --index-url https://test.pypi.org/simple/ your-package-name
```

Replace `your-package-name` with the name of your package as published on TestPyPI.

#### Using Poetry with TestPyPI

For Poetry users, they can specify the TestPyPI repository URL in their `pyproject.toml` file before adding the package ([more details here](https://stackoverflow.com/a/77811456)):

```toml
[[tool.poetry.source]]
name = "test-pypi"
url = "https://test.pypi.org/simple/"
priority = "explicit"
```

Then, they can add the package using Poetry as usual:

```bash
poetry add your-package-name --source test-pypi
```

Again, replace `your-package-name` with the name of your package as published on TestPyPI.

By following these steps, other developers can easily include your package as a dependency in their Python projects, whether it's from PyPI or TestPyPI.

## Conclusion

Congratulations! You've learned how to publish your Python project using Poetry. Whether you're testing your package on test.pypi or releasing it to the production PyPI, Poetry simplifies the process and ensures smooth distribution of your projects.

For further reference, you can also check out [this Stack Overflow answer](https://stackoverflow.com/a/72524326) demonstrating the publishing process.

Now, go ahead and share your amazing Python projects with the world!

---

Related resources:

- [Test PyPI](https://test.pypi.org/help/#twofa), [PyPI](https://pypi.org/), [Python Packaging](https://packaging.python.org/en/latest/tutorials/packaging-projects/)
- [beginner's guide to poetry](./poetry-in-practise.md)
- [python dependency management cheat including poetry, conda and more](./package-managers-in-python.md)
- [Introducing Two New Packages for Streamlining File Conversions in Python](../../../../../projects/introducing-two-new-packages-for-streamlining-file-conversions-in-python.md)
